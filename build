#!/usr/bin/env bash

if [ -z "$NVM_DIR" ]
then
    NVM_DIR="$HOME/.nvm"
fi

. $NVM_DIR/nvm.sh
nvm install
nvm use

set -e

pyvenv env
env/bin/pip install -r requirements.txt

if [ -d "plugins/" ]; then
  echo ">> Updating plugins"
  cd plugins/
  git pull
  git submodule update --recursive
  cd -
else
  git clone --recursive https://github.com/getpelican/pelican-plugins plugins/
fi


npm install
